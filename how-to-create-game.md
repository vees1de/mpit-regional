üéÆ 1. –¶–µ–ª—å

–°–æ–∑–¥–∞—Ç—å 5 –ª—ë–≥–∫–∏—Ö WebGL-–º–∏–Ω–∏-–∏–≥—Ä, –∫–æ—Ç–æ—Ä—ã–µ:

—Ö—Ä–∞–Ω—è—Ç—Å—è –≤–æ —Ñ—Ä–æ–Ω—Ç–µ (–≤ –ø–∞–ø–∫–µ /public/games/\*)

–≤–µ—Å—è—Ç ‚â§ 1‚Äì2 MB

–∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –∫–æ–≥–¥–∞ –∫–∞—Ä—Ç–æ—á–∫–∞ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ —ç–∫—Ä–∞–Ω

—É–Ω–∏—á—Ç–æ–∂–∞—é—Ç—Å—è, –∫–æ–≥–¥–∞ –∫–∞—Ä—Ç–æ—á–∫–∞ –≤—ã—Ö–æ–¥–∏—Ç –∑–∞ —ç–∫—Ä–∞–Ω

—É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –∂–µ—Å—Ç–∞–º–∏ (tap / hold / swipe)

—Ä–∞–±–æ—Ç–∞—é—Ç –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ 9:16

–ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–Ω–æ–º–Ω—ã (–∫–∞–∂–¥–∞—è –∏–≥—Ä–∞ = —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π WebGL –∫–æ–Ω—Ç–µ–∫—Å—Ç)

üìÅ 3. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏–≥—Ä—ã (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –µ–¥–∏–Ω–∞—è –¥–ª—è –≤—Å–µ—Ö)

–ö–∞–∂–¥–∞—è –∏–≥—Ä–∞ –¥–æ–ª–∂–Ω–∞ –ª–µ–∂–∞—Ç—å –≤:

/public/games/<game-id>/
index.js ‚Üê –≥–ª–∞–≤–Ω—ã–π –º–æ–¥—É–ª—å –∏–≥—Ä—ã
config.json ‚Üê –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∏–≥—Ä—ã
assets/ ‚Üê —Ç–µ–∫—Å—Ç—É—Ä—ã (–º–∏–Ω–∏–º—É–º)
shaders/ ‚Üê –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

–ü—Ä–∏–º–µ—Ä config.json:
{
"id": "flappy-block",
"name": "Flappy Block",
"engine": "webgl",
"entry": "/games/flappy-block/index.js",
"thumb": "/games/flappy-block/thumb.jpg"
}

üß† 4. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏–≥—Ä—ã (–µ–¥–∏–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç)

–ö–∞–∂–¥–∞—è –∏–≥—Ä–∞ –¥–æ–ª–∂–Ω–∞ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–≤–∞ –º–µ—Ç–æ–¥–∞:

export function start(canvasElement) {}
export function stop(canvasElement) {}

–ì–¥–µ:

start() ‚Äî –ø–æ–ª—É—á–∞–µ—Ç DOM-canvas, —Å–æ–∑–¥–∞—ë—Ç WebGL –∫–æ–Ω—Ç–µ–∫—Å—Ç, –∑–∞–ø—É—Å–∫–∞–µ—Ç –≥–µ–π–º–ª—É–ø

stop() ‚Äî –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–Ω–∏—á—Ç–æ–∂–∞–µ—Ç WebGL –∫–æ–Ω—Ç–µ–∫—Å—Ç, –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç –ø–∞–º—è—Ç—å

–≠—Ç–æ—Ç –∫–æ–Ω—Ç—Ä–∞–∫—Ç –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è –µ–¥–∏–Ω–æ–≥–æ –º–µ—Ö–∞–Ω–∏–∑–º–∞ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞:
import("/games/flappy-block/index.js").then(mod => {
mod.start(ref.current);
});

–ò –ø—Ä–∏ —É—Ö–æ–¥–µ –∏–∑ —ç–∫—Ä–∞–Ω–∞:

mod.stop(ref.current);

üïπ 5. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (input)

–£ –∫–∞–∂–¥–æ–π –∏–≥—Ä—ã –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:

Tap:
canvas.addEventListener("pointerdown", onTap);

Swipe (—É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞):
canvas.addEventListener("touchstart", ...)
canvas.addEventListener("touchmove", ...)
canvas.addEventListener("touchend", ...)

‚öôÔ∏è 6. –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ WebGL —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. –ò—Å–ø–æ–ª—å–∑—É–µ–º WebGL1

–ü–æ–¥–¥–µ—Ä–∂–∫–∞ ‚Äî –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞ –≤—Å–µ–º–∏ –º–æ–±–∏–ª—å–Ω—ã–º–∏ –±—Ä–∞—É–∑–µ—Ä–∞–º–∏.

2. –ë–µ–∑ —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö –¥–≤–∏–∂–∫–æ–≤

–¢–æ–ª—å–∫–æ:

raw WebGL

hand-written shaders

–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π JS

3. FPS ‚Üí —Ü–µ–ª–µ–≤—ã–µ 50‚Äì60, –º–∏–Ω–∏–º—É–º 30
4. –†–∞–∑–º–µ—Ä –±–∞–Ω–¥–ª–∞ ‚â§ 300‚Äì600 KB

(–∏–¥–µ–∞–ª ‚Äî 100‚Äì300 KB)

üìà 7. Game Lifecycle (–∫–∞–∫ TikTok)

–ö–∞–∂–¥–∞—è –∏–≥—Ä–∞ –¥–æ–ª–∂–Ω–∞ –ø–æ–¥—á–∏–Ω—è—Ç—å—Å—è –µ–¥–∏–Ω—ã–º –ø—Ä–∞–≤–∏–ª–∞–º:

¬∑ onEnterViewport ‚Üí start()

–∑–∞–≥—Ä—É–∑–∫–∞ –∞—Å—Å–µ—Ç–æ–≤

–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è WebGL –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

–∑–∞–ø—É—Å–∫ —Ä–µ–Ω–¥–µ—Ä–∞

¬∑ onLeaveViewport ‚Üí stop()

—É–¥–∞–ª–µ–Ω–∏–µ —Ç–∞–π–º–µ—Ä–æ–≤/game loop

–æ—á–∏—Å—Ç–∫–∞ GL –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

–æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç—É—Ä

–æ—á–∏—Å—Ç–∫–∞ EventListeners

¬∑ loadAhead(index+1)

–ü—Ä–µ—Ñ–µ—Ç—á —Å–ª–µ–¥—É—é—â–µ–π –∏–≥—Ä—ã (–∫–∞–∫ TikTok preloading –≤–∏–¥–µ–æ)

üöÄ 8. Performance Guidelines
‚úîÔ∏è –∏—Å–ø–æ–ª—å–∑—É–µ–º –æ–¥–∏–Ω canvas = –æ–¥–Ω–∞ –∏–≥—Ä–∞

–±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω –∏ —É–Ω–∏—á—Ç–æ–∂–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

‚úîÔ∏è GPU-—Ä–µ—Å—É—Ä—Å—ã –æ—Å–≤–æ–±–æ–∂–¥–∞—Ç—å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ

WebGL –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã (–æ–±—ã—á–Ω–æ 8 –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö)

‚úîÔ∏è –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç–µ–∫—Å—Ç—É—Ä—ã

512x512 –º–∞–∫—Å–∏–º—É–º

‚úîÔ∏è –Ω–∏–∫–∞–∫–∏—Ö –æ–≥—Ä–æ–º–Ω—ã—Ö —à—Ä–∏—Ñ—Ç–æ–≤ ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å bitmap fonts
‚úîÔ∏è –Ω–µ –≥—Ä—É–∑–∏—Ç—å –∞—Å—Å–µ—Ç—ã –∑–∞—Ä–∞–Ω–µ–µ ‚Äî —Ç–æ–ª—å–∫–æ –ø—Ä–∏ start()
üîå 9. API –¥–ª—è –∏–≥—Ä

–ò–≥—Ä—ã –∞–≤—Ç–æ–Ω–æ–º–Ω—ã –∏ –Ω–µ —Ç—Ä–µ–±—É—é—Ç —Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æ API, –Ω–æ —Ñ—Ä–æ–Ω—Ç—É –Ω—É–∂–Ω–æ:

/api/feed

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∏–≥—Ä:

{
"items": [
{
"id": "flappy-block",
"entry": "/games/flappy-block/index.js",
"thumb": "/games/flappy-block/thumb.jpg"
}
]
}

üì¶ 10. –ü—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞
/public/
/games/
/flappy-block/
index.js
config.json
assets/
shaders/

    /stack-tower/
    /color-switch/
    /knife-spin/
    /swipe-catcher/

/app/
/feed/
GameCard.tsx
Feed.tsx
/api/
feed/route.ts

/docs/
game-dev.md ‚Üê —ç—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç
